(function(t){function e(e){for(var n,s,r=e[0],c=e[1],l=e[2],u=0,f=[];u<r.length;u++)s=r[u],a[s]&&f.push(a[s][0]),a[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);h&&h(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],n=!0,r=1;r<i.length;r++){var c=i[r];0!==a[c]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var n={},a={app:0},o=[];function s(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=n,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/seat-select-demo/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var h=c;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0e9b":function(t,e,i){"use strict";var n=i("c77c"),a=i.n(n);a.a},"0ed7":function(t,e,i){},"12ae":function(t,e){t.exports="data:image/gif;base64,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"},"1f77":function(t,e,i){"use strict";var n=i("3e7f"),a=i.n(n);a.a},"23a3":function(t,e,i){},3824:function(t,e,i){},"3e7f":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],s=i("2877"),r={},c=Object(s["a"])(r,a,o,!1,null,null,null),l=c.exports,h=i("8c4f"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"wapper"},[i("header-view",{attrs:{titleText:t.movieName},on:{backHandleClick:t.back}}),i("plan-detail",{attrs:{propHallName:t.hallName,propShowDate:t.showDate,propShowTime:t.showTime}},[t._l(t.seatTypeList,function(e){return["1"===e.isShow&&"up"===e.position?i("div",{key:"seatType"+e.type,staticClass:"seat-detail-item"},[i("img",{staticClass:"seatTypeClass",attrs:{src:e.icon}}),i("span",{staticClass:"seatTypeClass"},[t._v(t._s(e.name))])]):t._e()]})],2),i("seat-area",{ref:"seatArea",attrs:{propThumbnailAreaWidth:t.thumbnailBoxWidth,propThumbnailAreaHeight:t.thumbnailBoxHeight,propYMax:t.yMax,propSeatScale:t.seatScale,propSeatHeight:t.positionDistin,propSeatToolArr:t.seatToolArr,propSeatAreaWidthRem:t.seatAreaWidthRem,propSeatAreaHeightRem:t.seatAreaHeightRem,propSeatBoxHeight:t.seatBoxHeight,propMiddleLine:t.middleLine,propHorizontalLine:t.horizontalLine}},[i("template",{slot:"thumbnail-seat-solt"},[t._l(t.seatList,function(e){return[i("div",{key:"thumbnail"+e.id,staticClass:"thumbnailSeatClass",style:{height:t.thumbnailHeight+"rem",width:t.thumbnailWidth+"rem",background:t.thumbnailBackgroud(e),top:e.gRow*t.thumbnailPositionDistin+"rem",left:e.gCol*t.thumbnailPositionDistin+"rem"}})]})],2),i("template",{slot:"seat-area-solt"},[i("div",{staticClass:"seatBox",style:{transform:"scale("+t.seatScale+")",height:t.seatBoxHeight+"rem",width:t.seatBoxWidth+"rem",marginLeft:t.seatBoxCenterMargin+"rem"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.seatList.length>0,expression:"seatList.length>0"}],staticClass:"middle-line",style:{height:t.seatBoxHeight+"rem",left:t.middleLine+"rem"}}),t._l(t.seatList,function(e,n){return[i("div",{key:e.id,staticClass:"seatClass",style:{height:t.height+"rem",width:t.width+"rem",top:e.gRow*t.positionDistin+"rem",left:e.gCol*t.positionDistin+"rem"},on:{click:function(e){return t.clickSeat(n)}}},[i("img",{staticClass:"seatImgClass",attrs:{seatId:e.id,seatIndex:n,src:e.nowIcon}})])]})],2)])],2),i("keep-alive",[i(t.selectedTabComponents,{tag:"component",attrs:{propSeatList:t.seatList,propSelectedSeat:t.selectedSeatList},on:{quickSelect:t.processUnSelected,cancelSelect:t.processSelected}})],1),i("confirm-lock",{attrs:{propSelectedSeat:t.selectedSeatList,propSeatList:t.seatList},on:{loading:t.loading}}),i("loading",{attrs:{load:t.load}})],1)},f=[],d=(i("7514"),i("7f7f"),i("5d73")),p=i.n(d),m=(i("ac6a"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"activity-area",style:{width:t.seatAreaWidthRem+"rem",height:t.seatAreaHeightRem+"rem"}},[t._m(0),i("div",{directives:[{name:"show",rawName:"v-show",value:t.thumbnailShow,expression:"thumbnailShow"}],staticClass:"thumbnail",style:{transform:"scale("+t.seatScale+")",width:t.thumbnailWidthRem+"rem",height:t.thumbnailHeighthRem+"rem"}},[i("div",{staticClass:"thumbnail-border",style:{transform:"scale("+t.scalereciprocal+")",top:t.topthumbnail+"rem",left:t.leftthumbnail+"rem"}}),t._t("thumbnail-seat-solt")],2),i("v-touch",{ref:"pinchAndPan",staticClass:"box",style:{transform:"scale("+t.scale+")",transformOrigin:t.transformOrigin,top:t.top+"rem",left:t.left+"rem",width:t.seatAreaWidthRem+"rem",height:t.seatAreaHeightRem+"rem"},attrs:{"pinch-options":{threshold:.09},"pan-options":{threshold:.01}},on:{pinchout:t.pinchout,pinchin:t.pinchin,panmove:t.panmove,panstart:t.panstart,panend:t.panend}},[t._t("seat-area-solt")],2),i("div",{staticClass:"seat-tool-parent",style:{height:t.seatAreaHeightRem+"rem"}},[i("div",{staticClass:"seat-tool",style:{transform:"scale("+t.seatScale+")",transformOrigin:t.transformOriginTool,marginTop:t.seatToolMargin+"rem",fontSize:t.seatToolFontSize+"rem"}},[t._l(t.seatToolArr,function(e,n){return[i("div",{key:"seat-tool"+n,staticClass:"seat-tool-item",style:{height:t.seatHeightWithScale+"rem",width:t.seatToolWidthWithScale+"rem",lineHeight:t.seatHeightWithScale+"rem"}},[t._v("\n            "+t._s(e)+"\n        ")])]})],2)])],1)}),v=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"screen"},[i("div",{staticClass:"screen-text"},[t._v("屏幕方向")])])}],A=(i("c5f6"),{name:"SeatArea",props:{propThumbnailAreaWidth:Number,propThumbnailAreaHeight:Number,propYMax:Number,propSeatScale:Number,propSeatHeight:Number,propSeatAreaWidthRem:Number,propSeatAreaHeightRem:Number,propMiddleLine:Number,propHorizontalLine:Number,propSeatBoxHeight:Number,propSeatToolArr:Array},data:function(){return{scale:1,top:0,left:0,topthumbnail:0,leftthumbnail:0,startX:0,startY:0,seatAreaWidthRem:this.propSeatAreaWidthRem,seatAreaHeightRem:this.propSeatAreaHeightRem,thumbnailWidthRem:this.propThumbnailAreaWidth,thumbnailHeighthRem:this.propThumbnailAreaHeight,middleLine:this.propMiddleLine,horizontalLine:this.propHorizontalLine,yMax:this.propYMax,seatScale:this.propSeatScale,pxtorem:75,screenRem:(document.body.clientWidth||window.innerWidth||document.documentElement.clientWidth)/10,thumbnailShow:!1,timer:{},seatHeight:this.propSeatHeight,seatBoxHeight:this.propSeatBoxHeight,touchStatus:!1,seatToolArr:this.propSeatToolArr}},methods:{changeScale:function(){1!==this.maxscale&&(this.scale=this.maxscale)},changePosition:function(t,e){if(1!==this.maxscale){var i=this;i.top=t*(this.scale-1)+.67,i.left=e*(this.scale-1)}},pinchout:function(){var t=this;t.scale>=0&&t.scale<t.maxscale&&(t.scale+=.1)},pinchin:function(){var t=this;t.scale>1&&(t.scale-=.1)},panmove:function(t){var e=this;if(e.touchStatus){e.top=(t.deltaY+e.startY)/e.screenRem,e.left=(t.deltaX+e.startX)/e.screenRem;var i=e.seatBoxHeight*e.seatScale/e.thumbnailHeighthRem,n=e.seatAreaWidthRem/e.thumbnailWidthRem;e.topthumbnail=-e.top/i*e.scalereciprocal,e.leftthumbnail=-e.left/n*e.scalereciprocal}},panstart:function(t){var e=this;e.touchStatus=!0,e.thumbnailShow=!0,e.startY=e.top*e.screenRem,e.startX=e.left*e.screenRem,clearTimeout(e.timer)},panend:function(t){var e=this;e.touchStatus=!1,1===e.scale?(e.top=0,e.left=0,e.topthumbnail=0,e.leftthumbnail=0):(e.left>e.crossleft?e.left=e.crossleft:e.left<-e.crossleft&&(e.left=-e.crossleft),e.leftthumbnail>e.thumbnailWidthRemProportion?e.leftthumbnail=e.thumbnailWidthRemProportion:e.leftthumbnail<-e.thumbnailWidthRemProportion&&(e.leftthumbnail=-e.thumbnailWidthRemProportion),e.top>e.crosstop?e.top=e.crosstop:e.top<-e.crosstop&&(e.top=-e.crosstop),e.topthumbnail>e.thumbnailHeighthRemProportion?e.topthumbnail=e.thumbnailHeighthRemProportion:e.topthumbnail<-e.thumbnailHeighthRemProportion&&(e.topthumbnail=-e.thumbnailHeighthRemProportion)),e.timer=setTimeout(function(){e.thumbnailShow=!1},2e3)}},computed:{maxscale:function(){return 1+1/this.seatScale},crossleft:function(){var t=this;return(t.scale-1)*t.seatAreaWidthRem*t.scaleXCross},crosstop:function(){var t=this;return(t.scale-1)*t.seatAreaHeightRem*t.scaleYCross},scalereciprocal:function(){return 1/this.scale},thumbnailWidthRemProportion:function(){var t=this;return(1-t.scalereciprocal)*t.thumbnailWidthRem/2},thumbnailHeighthRemProportion:function(){var t=this;return(1-t.scalereciprocal)*t.thumbnailHeighthRem/2},seatHeightWithScale:function(){var t=this;return t.seatHeight*t.scale},seatToolFontSize:function(){var t=20/this.pxtorem;return t*this.scale},seatToolWidthWithScale:function(){var t=this;return.3*t.scale},seatToolMargin:function(){var t=this,e=t.seatHeightWithScale*t.yMax*t.scaleYCross*(t.seatScale-1);return t.top+t.seatHeightWithScale*t.seatScale-t.crosstop+e},transformOrigin:function(){return 100*this.scaleXCross+"%"+100*this.scaleYCross+"%"},transformOriginTool:function(){return"0 "+100*this.scaleYCross+"%"},scaleXCross:function(){return this.middleLine/this.seatAreaWidthRem*this.seatScale},scaleYCross:function(){return this.horizontalLine/this.seatAreaHeightRem*this.seatScale}},watch:{propThumbnailAreaWidth:function(t){this.thumbnailWidthRem=t},propThumbnailAreaHeight:function(t){this.thumbnailHeighthRem=t},propYMax:function(t){this.yMax=t},propSeatScale:function(t){this.seatScale=t},propMiddleLine:function(t){this.middleLine=t},propHorizontalLine:function(t){this.horizontalLine=t},propSeatBoxHeight:function(t){this.seatBoxHeight=t},propSeatToolArr:function(t){this.seatToolArr=t}},mounted:function(){}}),g=A,S=(i("e7a1"),Object(s["a"])(g,m,v,!1,null,"01d0b720",null)),b=S.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"plan-detail"},[i("div",{staticClass:"plan-detail-item"},[t._v(t._s(t.propShowDate))]),i("div",{staticClass:"plan-detail-item"},[t._v(t._s(t.propShowTime))]),i("div",{staticClass:"plan-detail-item"},[t._v(t._s(t.propHallName))])]),i("div",{staticClass:"seat-detail"},[t._t("default")],2)])},C=[],L={props:{propHallName:String,propShowDate:String,propShowTime:String},components:{},data:function(){return{}},computed:{},watch:{},methods:{},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},x=L,y=(i("ea77"),Object(s["a"])(x,w,C,!1,null,"5f3d72ba",null)),I=y.exports,B=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"selected"},[i("div",{staticClass:"text"},[t._v("已选座位:")]),i("div",{ref:"scroll",staticClass:"scroll"},[i("ul",{ref:"scrollUl",staticClass:"scroll-ul"},t._l(t.selectedSeat,function(e){return i("li",{key:"select"+e.id,staticClass:"scroll-item",on:{click:function(i){return t.cancelSelect(e)}}},[t._v("\n        "+t._s(e.row)+"排"+t._s(e.col)+"座 "+t._s(e.price)+"元\n      ")])}),0)])])},H=[],R=i("1fba"),k={components:{},props:{propSelectedSeat:Array},data:function(){return{selectedSeat:this.propSelectedSeat}},computed:{},watch:{propSelectedSeat:function(t){var e=this,i=2.4*this.propSelectedSeat.length+1.2;this.$refs.scrollUl.style.width=i+"rem",this.$nextTick(function(){e.scroll?e.scroll.refresh():e.scroll=new R["a"](e.$refs.scroll,{scrollX:!0,scrollY:!1,eventPassthrough:"vertical"})})}},methods:{cancelSelect:function(t){this.$emit("cancelSelect",t.orgIndex)}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},M=k,D=(i("994a"),Object(s["a"])(M,B,H,!1,null,"230af56f",null)),E=D.exports,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"selected"},[i("div",{staticClass:"text"},[t._v("快速选座:")]),i("div",{ref:"scroll",staticClass:"scroll"},[i("ul",{staticClass:"scroll-ul"},[i("li",{staticClass:"scroll-item",on:{click:function(e){return t.quickSeat(1)}}},[t._v("1人座")]),i("li",{staticClass:"scroll-item",on:{click:function(e){return t.quickSeat(2)}}},[t._v("2人座")]),i("li",{staticClass:"scroll-item",on:{click:function(e){return t.quickSeat(3)}}},[t._v("3人座")]),i("li",{staticClass:"scroll-item",on:{click:function(e){return t.quickSeat(4)}}},[t._v("4人座")])])])])},W=[],Q=i("75fc"),O=i("b6d0"),_=i.n(O),N=i("cebc"),Y=i("a745"),F=i.n(Y),j=i("e814"),X=i.n(j),U={props:{propSeatList:Array},components:{},data:function(){return{seatList:this.propSeatList,seatMap:{}}},computed:{xMax:function(){var t=0;for(var e in this.seatList)this.seatList[e].gCol>t&&(t=this.seatList[e].gCol);return t},yMax:function(){var t=0;for(var e in this.seatList)this.seatList[e].gRow>t&&(t=this.seatList[e].gRow);return t},bestX:function(){return X()(this.xMax/2)+1},bestY:function(){return Math.round(.618*this.yMax)}},watch:{propSeatList:function(){this.seatList=this.propSeatList,this.creatSeatMap()}},methods:{quickSeat:function(t){for(var e,i=this,n=[],a=i.yMax;a>0;a--)if(e=i.seatMap[a],void 0!==e){var o=this.seachBestSeatByRow(e,t);null!=o&&n.push(o)}if(n.length<=0)alert("没有合适的座位~");else{var s=0;n.reduce(function(e,n,a,o){if(F()(e)){var r=Math.abs((e[0].gCol+e[t-1].gCol)/2-i.bestX),c=Math.abs(e[0].gRow-i.bestY);e=Math.sqrt(Math.pow(r,2)+Math.pow(c,2))}var l=Math.abs((n[0].gCol+n[t-1].gCol)/2-i.bestX),h=Math.abs(n[0].gRow-i.bestY),u=Math.sqrt(Math.pow(l,2)+Math.pow(h,2));return u>=e?e:(s=a,u)});var r=[],c=!0,l=!1,h=void 0;try{for(var u,f=p()(n[s]);!(c=(u=f.next()).done);c=!0){var d=u.value;if(null!==d.otherLoveSeatId){for(var m=!1,v=0;v<r.length;v++){var A=r[v];if(d.id===A){m=!0;break}}if(m)continue;r.push(d.otherLoveSeatId)}this.$emit("quickSelect",d.orgIndex)}}catch(g){l=!0,h=g}finally{try{c||null==f.return||f.return()}finally{if(l)throw h}}}},seachBestSeatByRow:function(t,e){var i=[],n=[],a=[];return a=this.checkSeatMiddle(t,e),i=this.checkSeatWithDirection(t,e,"-"),n=this.checkSeatWithDirection(t,e,"+"),a.length===e?a:i.length===e&&n.length===e?Math.abs(i[0].gCol-this.bestX)>Math.abs(n[0].gCol-this.bestX)?n:i:i.length===e?i:n.length===e?n:null},checkSeatMiddle:function(t,e){var i=this,n=[],a=!1,o=e>2?e-2:e-1;if(e===this.xMax)o-=1;else if(e>this.xMax)return n;var s=function(e){var o=t.find(function(t){return X()(t.gCol)===i.bestX+e});if(void 0===o)return"break";if(o.nowIcon===o.soldedIcon||o.nowIcon===o.fixIcon)return n=[],a=!1,"continue";null!==o.otherLoveSeatId&&(a=!0);var s=Object(N["a"])({},o);s.findMethod="*",n.push(s)};t:for(var r=-o;r<=o;r++){var c=s(r);switch(c){case"break":break t;case"continue":continue}}if(n.length>e)for(var l=0;l<o;l++){if(n.pop(),n.length===e)break;if(n.shift(),n.length===e)break}else if(n.length<e)return[];return a&&!this.checkLoveSeatIsDouble(n)?[]:n},checkSeatWithDirection:function(t,e,i){var n=this,a=e,o=3,s=[],r=!1,c=function(e){var c=void 0;if("-"===i?c=t.find(function(t){return X()(t.gCol)===n.bestX-e}):"+"===i&&(c=t.find(function(t){return X()(t.gCol)===n.bestX+e})),void 0===c)return a++,o--,o<=0?"break":"continue";if(c.nowIcon===c.soldedIcon||c.nowIcon===c.fixIcon)return a++,s=[],r=!1,"continue";null!==c.otherLoveSeatId&&(r=!0);var l=Object(N["a"])({},c);l.findMethod=i,s.push(l)};t:for(var l=0;l<a;l++){var h=c(l);switch(h){case"break":break t;case"continue":continue}}return r&&!this.checkLoveSeatIsDouble(s)?[]:s},checkLoveSeatIsDouble:function(t){var e=new _.a,i=new _.a,n=!0,a=!1,o=void 0;try{for(var s,r=p()(t);!(n=(s=r.next()).done);n=!0){var c=s.value;e.add(c.id)}}catch(g){a=!0,o=g}finally{try{n||null==r.return||r.return()}finally{if(a)throw o}}var l=!0,h=!1,u=void 0;try{for(var f,d=p()(t);!(l=(f=d.next()).done);l=!0){var m=f.value;null!==m.otherLoveSeatId&&i.add(m.otherLoveSeatId)}}catch(g){h=!0,u=g}finally{try{l||null==d.return||d.return()}finally{if(h)throw u}}var v=e.size,A=new _.a([].concat(Object(Q["a"])(e),Object(Q["a"])(i))).size;return v===A},creatSeatMap:function(){var t={};for(var e in this.seatList){var i=this.seatList[e].gRow;if(i in t)this.seatList[e].orgIndex=e,t[i].push(this.seatList[e]);else{var n=[];this.seatList[e].orgIndex=e,n.push(this.seatList[e]),t[i]=n}}this.seatMap=t}},created:function(){},mounted:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new R["a"](t.$refs.scroll,{scrollX:!0,scrollY:!1,eventPassthrough:"vertical"})})},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},P=U,J=(i("f95b"),Object(s["a"])(P,T,W,!1,null,"41d27e76",null)),G=J.exports,K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"confirm",on:{click:function(e){return t.lockSeat()}}},[t._v("\r\n  确认选座\r\n")])},q=[],z=i("7618"),$={components:{},props:{propSelectedSeat:Array,propSeatList:Array,propIsCheap:Number,propServiceFee:String,propPlanId:String},data:function(){return{selectedSeat:this.propSelectedSeat,seatList:this.propSeatList}},computed:{chPrice:function(){var t=0,e=this.selectedSeat,i=!0,n=!1,a=void 0;try{for(var o,s=p()(e);!(i=(o=s.next()).done);i=!0){var r=o.value;t+=X()(r.price)}}catch(c){n=!0,a=c}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return t},seatIdList:function(){var t=[],e=this.selectedSeat,i=!0,n=!1,a=void 0;try{for(var o,s=p()(e);!(i=(o=s.next()).done);i=!0){var r=o.value;t.push(r.id)}}catch(c){n=!0,a=c}finally{try{i||null==s.return||s.return()}finally{if(n)throw a}}return t}},watch:{propSelectedSeat:function(){this.selectedSeat=this.propSelectedSeat},propSeatList:function(){this.seatList=this.propSeatList},propIsCheap:function(t){this.isCheap=t},propServiceFee:function(t){this.serviceFee=t},propPlanId:function(t){this.planId=t}},methods:{lockSeat:function(){var t=this,e=t.$once((new Date).getTime());if(e)if(0!==t.selectedSeat.length){var i=t.selectedSeat.every(function(e,i,n){return t.checkSeat(e)});if(i){if(0===t.chPrice)return void alert("锁座失败了~,金额为0");this.createOrder()}else alert("请不要留下空位~")}else alert("请至少选择一个座位~")},createOrder:function(){alert("在这里开始走锁座逻辑")},checkSeat:function(t){var e=2+this.selectedSeat.length-1,i=t.gRow,n=t.gCol,a=t.otherLoveSeatIndex;if(null!=a)return!0;var o=this.checkSeatDirection(i,n,e,"-");if("special"===o)return!0;var s=this.checkSeatDirection(i,n,e,"+");return"special"===s||("normal"===s&&"normal"===o||"fail"!==s&&"fail"!==o)},checkSeatDirection:function(t,e,i,n){for(var a=this,o=0,s=1,r=function(i){var r=void 0;if("-"===n?r=a.seatList.find(function(n){return n.gRow===t&&n.gCol===e-i}):"+"===n&&(r=a.seatList.find(function(n){return n.gRow===t&&n.gCol===e+i})),s===i){if(void 0===r)return{v:"special"};if(r.nowIcon===r.soldedIcon||r.nowIcon===r.fixIcon)return{v:"special"};if(r.nowIcon===r.selectedIcon)return s++,"continue"}else{if(void 0===r)return{v:"fail"};if(r.nowIcon===r.soldedIcon||r.nowIcon===r.fixIcon||r.nowIcon===r.selectedIcon)return{v:"fail"}}if(o++,o>=2)return{v:"normal"}},c=1;c<=i;c++){var l=r(c);switch(l){case"continue":continue;default:if("object"===Object(z["a"])(l))return l.v}}}},created:function(){},mounted:function(){},beforeCreate:function(){},beforeMount:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){},activated:function(){}},V=$,Z=(i("6a24"),Object(s["a"])(V,K,q,!1,null,"15adabe2",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"header"}},[t._t("leftView",[i("div",{staticClass:"back"})]),t._t("titleView",[i("div",{staticClass:"title"},[t._v(t._s(t.titleText))])]),t._t("rightView",[i("div",{staticClass:"right"})]),t._t("default")],2)},it=[],nt={name:"",props:{showLeft:Number,titleText:String,rightText:String},data:function(){return{}},methods:{}},at=nt,ot=(i("1f77"),Object(s["a"])(at,et,it,!1,null,"cf545930",null)),st=ot.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.load,expression:"load"}],staticClass:"loading"},[n("img",{attrs:{src:i("12ae")}})])},ct=[],lt={name:"loading",data:function(){return{}},props:{loadingWord:String,load:Boolean}},ht=lt,ut=(i("0e9b"),Object(s["a"])(ht,rt,ct,!1,null,"5bb56e50",null)),ft=ut.exports,dt={name:"HallSeat",data:function(){return{seatList:[],seatTypeList:[],movieName:"",hallName:"",showDate:"",showTime:"",positionDistin:.5,width:.5,height:.5,thumbnailWidth:.1,thumbnailHeight:.1,thumbnailPositionDistin:.15,seatAreaWidthRem:10,selectedSeatList:[],maxSelect:4,load:!1}},components:{SeatArea:b,PlanDetail:I,HeaderView:st,SelectedTab:E,QuickSelectTab:G,ConfirmLock:tt,Loading:ft},mounted:function(){this.loading(!0),this.getSeatList(),this.loading(!1)},methods:{getSeatList:function(){var t=this;this.$get("/seat-select-demo/mock/seatLove.json").then(function(e){console.log("座位返回response------\x3e>>>",e),0!==e.errorCode&&(alert(e.errorMsg),t.$router.go(-1));var i=e.seatList;if(i){i.forEach(function(t){var n=t.type.substr(0,1);if(t.otherLoveSeatIndex=null,t.otherLoveSeatId=null,"1"===n)for(var a in i)i[a].gRow===t.gRow&&i[a].gCol===t.gCol+1&&(t.otherLoveSeatIndex=a,t.otherLoveSeatId=i[a].id);if("2"===n)for(var o in i)i[o].gRow===t.gRow&&i[o].gCol===t.gCol-1&&(t.otherLoveSeatIndex=o,t.otherLoveSeatId=i[o].id);var s=!0,r=!1,c=void 0;try{for(var l,h=p()(e.seatTypeList);!(s=(l=h.next()).done);s=!0){var u=l.value;t.type===u.type&&(t.nowIcon=u.icon,t.defautIcon=u.icon),n+"-1"===u.type&&(t.selectedIcon=u.icon),n+"-2"===u.type&&(t.soldedIcon=u.icon),n+"-3"===u.type&&(t.fixIcon=u.icon)}}catch(f){r=!0,c=f}finally{try{s||null==h.return||h.return()}finally{if(r)throw c}}t.defautIcon===t.soldedIcon||t.defautIcon===t.fixIcon?t.canClick=!1:t.canClick=!0});var n=e.showTime;19===n.length&&(t.showDate=n.substring(0,10)+"("+n.substring(11,13)+")",t.showTime=n.substring(14,19)),t.seatList=i,t.seatTypeList=e.seatTypeList,t.movieName=e.movieName,t.hallName=e.name}},function(t){console.log(t)})},clickSeat:function(t){this.seatList[t].canClick&&(this.seatList[t].nowIcon===this.seatList[t].selectedIcon?this.processSelected(t):this.processUnSelected(t))},processSelected:function(t){var e=this.selectedSeatList,i=this.seatList[t].otherLoveSeatIndex;if(null!==i){for(var n in this.$set(this.seatList[t],"nowIcon",this.seatList[t].defautIcon),this.$set(this.seatList[i],"nowIcon",this.seatList[i].defautIcon),e)e[n].id===this.seatList[t].id&&e.splice(n,1);for(var a in e)e[a].id===this.seatList[i].id&&e.splice(a,1)}else for(var o in this.$set(this.seatList[t],"nowIcon",this.seatList[t].defautIcon),e)e[o].id===this.seatList[t].id&&e.splice(o,1)},processUnSelected:function(t){if(0===this.selectedSeatList.length){var e=(this.seatList[t].gRow*this.positionDistin-this.horizontalLine)*this.seatScale,i=(this.seatList[t].gCol*this.positionDistin-this.middleLine)*this.seatScale;e=e>0?-e-this.positionDistin:-e+this.positionDistin,i=i>0?-i-this.positionDistin:-i+this.positionDistin,this.$refs.seatArea.changeScale(),this.$refs.seatArea.changePosition(e,i)}var n=this.selectedSeatList,a=this.seatList[t].otherLoveSeatIndex;if(null!==a){if(n.length>=this.maxSelect-1)return void this.showSlot("最多只能选择"+this.maxSelect+"个座位哦~");this.$set(this.seatList[t],"nowIcon",this.seatList[t].selectedIcon),this.$set(this.seatList[a],"nowIcon",this.seatList[a].selectedIcon),this.seatList[t].orgIndex=t,this.seatList[a].orgIndex=a,n.push(this.seatList[t]),n.push(this.seatList[a])}else{if(n.length>=this.maxSelect)return void this.showSlot("最多只能选择"+this.maxSelect+"个座位哦~");this.$set(this.seatList[t],"nowIcon",this.seatList[t].selectedIcon),this.seatList[t].orgIndex=t,n.push(this.seatList[t])}},back:function(){this.$router.go(-1)},loading:function(t){this.load=t},thumbnailBackgroud:function(t){return t.nowIcon===t.selectedIcon?"green":t.nowIcon===t.soldedIcon?"red":t.nowIcon===t.fixIcon?"red":"white"}},computed:{seatAreaHeightRem:function(){var t=(document.body.clientWidth||window.innerWidth||document.documentElement.clientWidth)/10,e=document.documentElement.clientHeight||window.innerHeight||document.body.clientHeight,i=7.220000000000001;return e/t-i},xMax:function(){var t=0;for(var e in this.seatList)this.seatList[e].gCol>t&&(t=this.seatList[e].gCol);return t},yMax:function(){var t=0;for(var e in this.seatList)this.seatList[e].gRow>t&&(t=this.seatList[e].gRow);return t},middleLine:function(){return(this.xMax/2+1)*this.positionDistin-.025},horizontalLine:function(){return(this.yMax/2+1)*this.positionDistin-.025},seatScale:function(){var t=1,e=1;return t=this.seatAreaWidthRem/this.seatBoxWidth,e=this.seatAreaHeightRem/this.seatBoxHeight,t<e?t:e},seatBoxCenterMargin:function(){return-this.seatBoxWidth*this.seatScale/2},seatBoxHeight:function(){return(this.yMax+1)*this.positionDistin+this.height},seatBoxWidth:function(){return(this.xMax+1)*this.positionDistin+this.width},thumbnailBoxWidth:function(){return(this.xMax+1)*this.thumbnailPositionDistin+this.thumbnailWidth},thumbnailBoxHeight:function(){return(this.yMax+1)*this.thumbnailPositionDistin+this.thumbnailHeight},selectedTabComponents:function(){return this.selectedSeatList.length>0?"SelectedTab":"QuickSelectTab"},seatToolArr:function(){for(var t=this,e=[],i=this.yMax,n=function(i){var n=t.seatList.find(function(t){return t.gRow===i});n?e.push(n.row):e.push("")},a=1;a<=i;a++)n(a);return e}}},pt=dt,mt=(i("81c8"),Object(s["a"])(pt,u,f,!1,null,"2a6af93a",null)),vt=mt.exports;n["a"].use(h["a"]);var At=new h["a"]({mode:"history",base:"/seat-select-demo/",routes:[{path:"/",name:"HallSeat",component:vt}]}),gt=(i("5cfb"),i("23a3"),i("795b")),St=i.n(gt),bt=i("f499"),wt=i.n(bt),Ct=i("bc3a"),Lt=i.n(Ct);function xt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new St.a(function(i,n){Lt.a.get(t,{params:e}).then(function(t){i(t.data)}).catch(function(t){n(t)})})}function yt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new St.a(function(i,n){Lt.a.post(t,e).then(function(t){i(t.data)},function(t){n(t)})})}function It(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new St.a(function(i,n){Lt.a.patch(t,e).then(function(t){i(t.data)},function(t){n(t)})})}function Bt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new St.a(function(i,n){Lt.a.put(t,e).then(function(t){i(t.data)},function(t){n(t)})})}Lt.a.defaults.timeout=5e3,Lt.a.defaults.baseURL="",Lt.a.interceptors.request.use(function(t){return t.data=wt()(t.data),t.headers={"Content-Type":"application/json;charset=UTF-8"},t},function(t){return St.a.reject(t)});i("3a34");var Ht=i("ca95");n["a"].config.productionTip=!1,n["a"].use(Ht,{name:"v-touch"}),n["a"].prototype.$post=yt,n["a"].prototype.$get=xt,n["a"].prototype.$patch=It,n["a"].prototype.$put=Bt,new n["a"]({router:At,render:function(t){return t(l)}}).$mount("#app")},"5fb0":function(t,e,i){},"6a24":function(t,e,i){"use strict";var n=i("0ed7"),a=i.n(n);a.a},"771b":function(t,e,i){},"81c8":function(t,e,i){"use strict";var n=i("771b"),a=i.n(n);a.a},"994a":function(t,e,i){"use strict";var n=i("efb7"),a=i.n(n);a.a},c77c:function(t,e,i){},e715:function(t,e,i){},e7a1:function(t,e,i){"use strict";var n=i("3824"),a=i.n(n);a.a},ea77:function(t,e,i){"use strict";var n=i("5fb0"),a=i.n(n);a.a},efb7:function(t,e,i){},f95b:function(t,e,i){"use strict";var n=i("e715"),a=i.n(n);a.a}});